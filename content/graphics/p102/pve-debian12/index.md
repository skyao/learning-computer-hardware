---
title: "直通 debian12"
linkTitle: "debian12"
weight: 10
date: 2025-03-13
description: p102显卡在 PVE8 下直通给 debian12 虚拟机
---

## 准备工作

在 pve8 下查看 p102 显卡的信息：

```bash
lspci |  grep 3D
81:00.0 3D controller: NVIDIA Corporation GP102 [P102-100] (rev a1)
```

要直通这块卡给 debian12 虚拟机，需要准备：

- 开启 pcie 直通
- 安装 debian 12 虚拟机

### 修改 device ID

直通显卡时，需要修改显卡的设备ID，仿冒 1080 TI 显卡。

- Vendor ID:  0x10DE
- Device ID: 0x1B06
- Sub-Vendor ID:  0x0000
- Sub-Device ID: 0x0000

![](images/change-device-id.png)

### 直通给 debian12

之后将卡直通给 debian12 虚拟机：

![](images/pass-through.png)

启动 debian12 之后，查看显卡信息：

```bash
$ lspci | grep 3D
01:00.0 3D controller: NVIDIA Corporation GP102 [GeForce GTX 1080 Ti] (rev a1)

$ lspci -nn | egrep -i "3d|display|vga"
00:01.0 VGA compatible controller [0300]: Device [1234:1111] (rev 02)
01:00.0 3D controller [0302]: NVIDIA Corporation GP102 [GeForce GTX 1080 Ti] [10de:1b06] (rev a1)
```

## 安装 nvidia 驱动

### 更新系统

安装驱动前先更新一下

```bash
sudo apt update
sudo apt upgrade
sudo reboot
```

重启之后，如果有内核更新，可以先删除不用的旧内核。

### 添加 non-free 仓库

```bash
sudo vi /etc/apt/sources.list
```

在最后加入一行：

```bash
deb http://deb.debian.org/debian/ bullseye main contrib non-free
```

执行更新：

```bash
sudo apt update
```

### 安装 linux-headers

```bash
sudo apt install linux-headers-$(uname -r)
```

### 安装 nvidia-detect

```bash
sudo apt -y install nvidia-detect
```

安装的版本是 470.256.02-2：

```bash
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following NEW packages will be installed:
  nvidia-detect
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 252 kB of archives.
After this operation, 326 kB of additional disk space will be used.
Get:1 http://deb.debian.org/debian bullseye/non-free amd64 nvidia-detect amd64 470.256.02-2 [252 kB]
Fetched 252 kB in 0s (586 kB/s)
Selecting previously unselected package nvidia-detect.
(Reading database ... 64553 files and directories currently installed.)
Preparing to unpack .../nvidia-detect_470.256.02-2_amd64.deb ...
Unpacking nvidia-detect (470.256.02-2) ...
Setting up nvidia-detect (470.256.02-2) ...
```

安装完成之后执行：

```bash
sudo nvidia-detect 
```

能看到输出如下：

```bash
Detected NVIDIA GPUs:
01:00.0 3D controller [0302]: NVIDIA Corporation GP102 [GeForce GTX 1080 Ti] [10de:1b06] (rev a1)

Checking card:  NVIDIA Corporation GP102 [GeForce GTX 1080 Ti] (rev a1)
Your card is supported by all driver versions.
Your card is also supported by the Tesla 470 drivers series.
It is recommended to install the
    nvidia-driver
package.
```

### 安装 nvidia-driver

```bash
sudo apt install nvidia-driver
```

输出为：

```bash
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  glx-alternative-mesa glx-alternative-nvidia glx-diversions libcuda1 libegl-nvidia0 libgl1-nvidia-glvnd-glx libgles-nvidia1 libgles-nvidia2 libgles1 libglx-nvidia0
  libnvcuvid1 libnvidia-cbl libnvidia-cfg1 libnvidia-egl-wayland1 libnvidia-eglcore libnvidia-encode1 libnvidia-glcore libnvidia-glvkspirv libnvidia-ml1
  libnvidia-ptxjitcompiler1 libnvidia-rtcore libopengl0 libunwind8 libvdpau1 libvulkan1 libxcvt0 libxfont2 nvidia-alternative nvidia-driver-bin nvidia-driver-libs
  nvidia-egl-common nvidia-egl-icd nvidia-installer-cleanup nvidia-kernel-common nvidia-kernel-dkms nvidia-kernel-support nvidia-legacy-check nvidia-modprobe
  nvidia-persistenced nvidia-smi nvidia-support nvidia-vdpau-driver nvidia-vulkan-common nvidia-vulkan-icd update-glx xcvt xfonts-base xfonts-encodings xfonts-utils
  xserver-common xserver-xorg-core xserver-xorg-video-nvidia
Suggested packages:
  nvidia-cuda-mps vulkan-tools xfs | xserver xfonts-100dpi | xfonts-75dpi xfonts-scalable
Recommended packages:
  libcuda1:i386 nvidia-settings nvidia-driver-libs:i386
The following NEW packages will be installed:
  glx-alternative-mesa glx-alternative-nvidia glx-diversions libcuda1 libegl-nvidia0 libgl1-nvidia-glvnd-glx libgles-nvidia1 libgles-nvidia2 libgles1 libglx-nvidia0
  libnvcuvid1 libnvidia-cbl libnvidia-cfg1 libnvidia-egl-wayland1 libnvidia-eglcore libnvidia-encode1 libnvidia-glcore libnvidia-glvkspirv libnvidia-ml1
  libnvidia-ptxjitcompiler1 libnvidia-rtcore libopengl0 libunwind8 libvdpau1 libvulkan1 libxcvt0 libxfont2 nvidia-alternative nvidia-driver nvidia-driver-bin
  nvidia-driver-libs nvidia-egl-common nvidia-egl-icd nvidia-installer-cleanup nvidia-kernel-common nvidia-kernel-dkms nvidia-kernel-support nvidia-legacy-check
  nvidia-modprobe nvidia-persistenced nvidia-smi nvidia-support nvidia-vdpau-driver nvidia-vulkan-common nvidia-vulkan-icd update-glx xcvt xfonts-base xfonts-encodings
  xfonts-utils xserver-common xserver-xorg-core xserver-xorg-video-nvidia
0 upgraded, 53 newly installed, 0 to remove and 0 not upgraded.
Need to get 110 MB of archives.
After this operation, 341 MB of additional disk space will be used.
Do you want to continue? [Y/n] Y
Get:1 http://deb.debian.org/debian bullseye/contrib amd64 update-glx amd64 1.2.1~deb11u1 [10.7 kB]
Get:2 http://mirrors.ustc.edu.cn/debian bookworm/main amd64 libnvidia-egl-wayland1 amd64 1:1.1.10-1 [25.5 kB]
......
Get:53 http://deb.debian.org/debian bullseye/non-free amd64 nvidia-vulkan-icd amd64 470.256.02-2 [249 kB]
Fetched 110 MB in 4s (28.5 MB/s)
Extracting templates from packages: 100%
Preconfiguring packages ...
Selecting previously unselected package update-glx.
(Reading database ... 64575 files and directories currently installed.)
Preparing to unpack .../update-glx_1.2.1~deb11u1_amd64.deb ...
Unpacking update-glx (1.2.1~deb11u1) ...
Selecting previously unselected package glx-alternative-mesa.
Preparing to unpack .../glx-alternative-mesa_1.2.1~deb11u1_amd64.deb ...
Unpacking glx-alternative-mesa (1.2.1~deb11u1) ...
Selecting previously unselected package nvidia-installer-cleanup.
Preparing to unpack .../nvidia-installer-cleanup_20151021+13_amd64.deb ...
Unpacking nvidia-installer-cleanup (20151021+13) ...
Setting up nvidia-installer-cleanup (20151021+13) ...
Selecting previously unselected package glx-diversions.
(Reading database ... 64715 files and directories currently installed.)
Preparing to unpack .../glx-diversions_1.2.1~deb11u1_amd64.deb ...
Unpacking glx-diversions (1.2.1~deb11u1) ...
Selecting previously unselected package glx-alternative-nvidia.
Preparing to unpack .../glx-alternative-nvidia_1.2.1~deb11u1_amd64.deb ...
Unpacking glx-alternative-nvidia (1.2.1~deb11u1) ...
Selecting previously unselected package nvidia-legacy-check.
Preparing to unpack .../nvidia-legacy-check_470.256.02-2_amd64.deb ...
Unpacking nvidia-legacy-check (470.256.02-2) ...
Selecting previously unselected package nvidia-support.
Preparing to unpack .../nvidia-support_20151021+13_amd64.deb ...
Unpacking nvidia-support (20151021+13) ...
Setting up nvidia-legacy-check (470.256.02-2) ...
Selecting previously unselected package nvidia-alternative.
(Reading database ... 64758 files and directories currently installed.)
Preparing to unpack .../00-nvidia-alternative_470.256.02-2_amd64.deb ...
Unpacking nvidia-alternative (470.256.02-2) ...
Selecting previously unselected package libnvidia-ptxjitcompiler1:amd64.
Preparing to unpack .../01-libnvidia-ptxjitcompiler1_470.256.02-2_amd64.deb ...
Unpacking libnvidia-ptxjitcompiler1:amd64 (470.256.02-2) ...
Selecting previously unselected package libcuda1:amd64.
Preparing to unpack .../02-libcuda1_470.256.02-2_amd64.deb ...
Unpacking libcuda1:amd64 (470.256.02-2) ...
Selecting previously unselected package libnvidia-glvkspirv:amd64.
Preparing to unpack .../03-libnvidia-glvkspirv_470.256.02-2_amd64.deb ...
Unpacking libnvidia-glvkspirv:amd64 (470.256.02-2) ...
Selecting previously unselected package libnvidia-eglcore:amd64.
Preparing to unpack .../04-libnvidia-eglcore_470.256.02-2_amd64.deb ...
Unpacking libnvidia-eglcore:amd64 (470.256.02-2) ...
Selecting previously unselected package libnvidia-glcore:amd64.
Preparing to unpack .../05-libnvidia-glcore_470.256.02-2_amd64.deb ...
Unpacking libnvidia-glcore:amd64 (470.256.02-2) ...
Selecting previously unselected package libglx-nvidia0:amd64.
Preparing to unpack .../06-libglx-nvidia0_470.256.02-2_amd64.deb ...
Unpacking libglx-nvidia0:amd64 (470.256.02-2) ...
Selecting previously unselected package libgl1-nvidia-glvnd-glx:amd64.
Preparing to unpack .../07-libgl1-nvidia-glvnd-glx_470.256.02-2_amd64.deb ...
Unpacking libgl1-nvidia-glvnd-glx:amd64 (470.256.02-2) ...
Selecting previously unselected package nvidia-egl-common.
Preparing to unpack .../08-nvidia-egl-common_470.256.02-2_amd64.deb ...
Unpacking nvidia-egl-common (470.256.02-2) ...
Selecting previously unselected package libnvidia-egl-wayland1:amd64.
Preparing to unpack .../09-libnvidia-egl-wayland1_1%3a1.1.10-1_amd64.deb ...
Unpacking libnvidia-egl-wayland1:amd64 (1:1.1.10-1) ...
Selecting previously unselected package libegl-nvidia0:amd64.
Preparing to unpack .../10-libegl-nvidia0_470.256.02-2_amd64.deb ...
Unpacking libegl-nvidia0:amd64 (470.256.02-2) ...
Selecting previously unselected package nvidia-egl-icd:amd64.
Preparing to unpack .../11-nvidia-egl-icd_470.256.02-2_amd64.deb ...
Unpacking nvidia-egl-icd:amd64 (470.256.02-2) ...
Selecting previously unselected package nvidia-driver-libs:amd64.
Preparing to unpack .../12-nvidia-driver-libs_470.256.02-2_amd64.deb ...
Unpacking nvidia-driver-libs:amd64 (470.256.02-2) ...
Selecting previously unselected package libnvidia-ml1:amd64.
Preparing to unpack .../13-libnvidia-ml1_470.256.02-2_amd64.deb ...
Unpacking libnvidia-ml1:amd64 (470.256.02-2) ...
Selecting previously unselected package nvidia-driver-bin.
Preparing to unpack .../14-nvidia-driver-bin_470.256.02-2_amd64.deb ...
Unpacking nvidia-driver-bin (470.256.02-2) ...
Selecting previously unselected package xserver-common.
Preparing to unpack .../15-xserver-common_2%3a21.1.7-3+deb12u9_all.deb ...
Unpacking xserver-common (2:21.1.7-3+deb12u9) ...
Selecting previously unselected package libunwind8:amd64.
Preparing to unpack .../16-libunwind8_1.6.2-3_amd64.deb ...
Unpacking libunwind8:amd64 (1.6.2-3) ...
Selecting previously unselected package libxcvt0:amd64.
Preparing to unpack .../17-libxcvt0_0.1.2-1_amd64.deb ...
Unpacking libxcvt0:amd64 (0.1.2-1) ...
Selecting previously unselected package libxfont2:amd64.
Preparing to unpack .../18-libxfont2_1%3a2.0.6-1_amd64.deb ...
Unpacking libxfont2:amd64 (1:2.0.6-1) ...
Selecting previously unselected package xserver-xorg-core.
Preparing to unpack .../19-xserver-xorg-core_2%3a21.1.7-3+deb12u9_amd64.deb ...
Unpacking xserver-xorg-core (2:21.1.7-3+deb12u9) ...
Selecting previously unselected package xserver-xorg-video-nvidia.
Preparing to unpack .../20-xserver-xorg-video-nvidia_470.256.02-2_amd64.deb ...
Unpacking xserver-xorg-video-nvidia (470.256.02-2) ...
Selecting previously unselected package libvdpau1:amd64.
Preparing to unpack .../21-libvdpau1_1.5-2_amd64.deb ...
Unpacking libvdpau1:amd64 (1.5-2) ...
Selecting previously unselected package nvidia-vdpau-driver:amd64.
Preparing to unpack .../22-nvidia-vdpau-driver_470.256.02-2_amd64.deb ...
Unpacking nvidia-vdpau-driver:amd64 (470.256.02-2) ...
Selecting previously unselected package nvidia-kernel-common.
Preparing to unpack .../23-nvidia-kernel-common_20151021+13_amd64.deb ...
Unpacking nvidia-kernel-common (20151021+13) ...
Selecting previously unselected package nvidia-modprobe.
Preparing to unpack .../24-nvidia-modprobe_470.182.03-1_amd64.deb ...
Unpacking nvidia-modprobe (470.182.03-1) ...
Selecting previously unselected package nvidia-kernel-support.
Preparing to unpack .../25-nvidia-kernel-support_470.256.02-2_amd64.deb ...
Unpacking nvidia-kernel-support (470.256.02-2) ...
Selecting previously unselected package nvidia-kernel-dkms.
Preparing to unpack .../26-nvidia-kernel-dkms_470.256.02-2_amd64.deb ...
Unpacking nvidia-kernel-dkms (470.256.02-2) ...
Selecting previously unselected package nvidia-driver.
Preparing to unpack .../27-nvidia-driver_470.256.02-2_amd64.deb ...
Unpacking nvidia-driver (470.256.02-2) ...
Selecting previously unselected package libnvidia-cfg1:amd64.
Preparing to unpack .../28-libnvidia-cfg1_470.256.02-2_amd64.deb ...
Unpacking libnvidia-cfg1:amd64 (470.256.02-2) ...
Selecting previously unselected package nvidia-persistenced.
Preparing to unpack .../29-nvidia-persistenced_470.103.01-2~deb11u1_amd64.deb ...
Unpacking nvidia-persistenced (470.103.01-2~deb11u1) ...
Selecting previously unselected package libgles1:amd64.
Preparing to unpack .../30-libgles1_1.6.0-1_amd64.deb ...
Unpacking libgles1:amd64 (1.6.0-1) ...
Selecting previously unselected package libgles-nvidia1:amd64.
Preparing to unpack .../31-libgles-nvidia1_470.256.02-2_amd64.deb ...
Unpacking libgles-nvidia1:amd64 (470.256.02-2) ...
Selecting previously unselected package libgles-nvidia2:amd64.
Preparing to unpack .../32-libgles-nvidia2_470.256.02-2_amd64.deb ...
Unpacking libgles-nvidia2:amd64 (470.256.02-2) ...
Selecting previously unselected package libnvcuvid1:amd64.
Preparing to unpack .../33-libnvcuvid1_470.256.02-2_amd64.deb ...
Unpacking libnvcuvid1:amd64 (470.256.02-2) ...
Selecting previously unselected package libnvidia-cbl:amd64.
Preparing to unpack .../34-libnvidia-cbl_470.256.02-2_amd64.deb ...
Unpacking libnvidia-cbl:amd64 (470.256.02-2) ...
Selecting previously unselected package libnvidia-encode1:amd64.
Preparing to unpack .../35-libnvidia-encode1_470.256.02-2_amd64.deb ...
Unpacking libnvidia-encode1:amd64 (470.256.02-2) ...
Selecting previously unselected package libnvidia-rtcore:amd64.
Preparing to unpack .../36-libnvidia-rtcore_470.256.02-2_amd64.deb ...
Unpacking libnvidia-rtcore:amd64 (470.256.02-2) ...
Selecting previously unselected package libvulkan1:amd64.
Preparing to unpack .../37-libvulkan1_1.3.239.0-1_amd64.deb ...
Unpacking libvulkan1:amd64 (1.3.239.0-1) ...
Selecting previously unselected package nvidia-smi.
Preparing to unpack .../38-nvidia-smi_470.256.02-2_amd64.deb ...
Unpacking nvidia-smi (470.256.02-2) ...
Selecting previously unselected package nvidia-vulkan-common.
Preparing to unpack .../39-nvidia-vulkan-common_470.256.02-2_amd64.deb ...
Unpacking nvidia-vulkan-common (470.256.02-2) ...
Selecting previously unselected package nvidia-vulkan-icd:amd64.
Preparing to unpack .../40-nvidia-vulkan-icd_470.256.02-2_amd64.deb ...
Unpacking nvidia-vulkan-icd:amd64 (470.256.02-2) ...
Selecting previously unselected package xcvt.
Preparing to unpack .../41-xcvt_0.1.2-1_amd64.deb ...
Unpacking xcvt (0.1.2-1) ...
Selecting previously unselected package xfonts-encodings.
Preparing to unpack .../42-xfonts-encodings_1%3a1.0.4-2.2_all.deb ...
Unpacking xfonts-encodings (1:1.0.4-2.2) ...
Selecting previously unselected package xfonts-utils.
Preparing to unpack .../43-xfonts-utils_1%3a7.7+6_amd64.deb ...
Unpacking xfonts-utils (1:7.7+6) ...
Selecting previously unselected package xfonts-base.
Preparing to unpack .../44-xfonts-base_1%3a1.0.5+nmu1_all.deb ...
Unpacking xfonts-base (1:1.0.5+nmu1) ...
Selecting previously unselected package libopengl0:amd64.
Preparing to unpack .../45-libopengl0_1.6.0-1_amd64.deb ...
Unpacking libopengl0:amd64 (1.6.0-1) ...
Setting up nvidia-support (20151021+13) ...
Setting up libnvidia-glvkspirv:amd64 (470.256.02-2) ...
Setting up libnvidia-eglcore:amd64 (470.256.02-2) ...
Setting up libnvidia-cbl:amd64 (470.256.02-2) ...
Setting up nvidia-egl-common (470.256.02-2) ...
Setting up nvidia-kernel-common (20151021+13) ...
Setting up update-glx (1.2.1~deb11u1) ...
Setting up libunwind8:amd64 (1.6.2-3) ...
Setting up libopengl0:amd64 (1.6.0-1) ...
Setting up nvidia-modprobe (470.182.03-1) ...
Setting up libnvidia-egl-wayland1:amd64 (1:1.1.10-1) ...
Setting up libgles1:amd64 (1.6.0-1) ...
Setting up xfonts-encodings (1:1.0.4-2.2) ...
Setting up libnvidia-glcore:amd64 (470.256.02-2) ...
Setting up libvulkan1:amd64 (1.3.239.0-1) ...
Setting up libnvidia-ptxjitcompiler1:amd64 (470.256.02-2) ...
Setting up nvidia-vulkan-common (470.256.02-2) ...
Setting up libvdpau1:amd64 (1.5-2) ...
Setting up libxcvt0:amd64 (0.1.2-1) ...
Setting up xserver-common (2:21.1.7-3+deb12u9) ...
Setting up libxfont2:amd64 (1:2.0.6-1) ...
Setting up libnvidia-rtcore:amd64 (470.256.02-2) ...
Setting up xserver-xorg-core (2:21.1.7-3+deb12u9) ...
Setting up glx-alternative-mesa (1.2.1~deb11u1) ...
Setting up xfonts-utils (1:7.7+6) ...
Setting up xcvt (0.1.2-1) ...
Setting up xfonts-base (1:1.0.5+nmu1) ...
Setting up glx-diversions (1.2.1~deb11u1) ...
update-alternatives: using /usr/lib/mesa-diverted to provide /usr/lib/glx (glx) in auto mode
Processing triggers for mailcap (3.70+nmu1) ...
Processing triggers for fontconfig (2.14.1-4) ...
Processing triggers for initramfs-tools (0.142+deb12u1) ...
update-initramfs: Generating /boot/initrd.img-6.1.0-31-amd64
Processing triggers for libc-bin (2.36-9+deb12u9) ...
Processing triggers for man-db (2.11.2-2) ...
Processing triggers for glx-alternative-mesa (1.2.1~deb11u1) ...
update-alternatives: updating alternative /usr/lib/mesa-diverted because link group glx has changed slave links
Setting up glx-alternative-nvidia (1.2.1~deb11u1) ...
Processing triggers for glx-alternative-nvidia (1.2.1~deb11u1) ...
Setting up nvidia-alternative (470.256.02-2) ...
Processing triggers for nvidia-alternative (470.256.02-2) ...
update-alternatives: using /usr/lib/nvidia/current to provide /usr/lib/nvidia/nvidia (nvidia) in auto mode
Setting up libnvidia-ml1:amd64 (470.256.02-2) ...
Setting up libcuda1:amd64 (470.256.02-2) ...
Setting up libnvidia-cfg1:amd64 (470.256.02-2) ...
Setting up libglx-nvidia0:amd64 (470.256.02-2) ...
Setting up nvidia-kernel-support (470.256.02-2) ...
Setting up xserver-xorg-video-nvidia (470.256.02-2) ...
Setting up nvidia-vulkan-icd:amd64 (470.256.02-2) ...
Setting up nvidia-vdpau-driver:amd64 (470.256.02-2) ...
Setting up libgl1-nvidia-glvnd-glx:amd64 (470.256.02-2) ...
Setting up libgles-nvidia1:amd64 (470.256.02-2) ...
Setting up libegl-nvidia0:amd64 (470.256.02-2) ...
Setting up nvidia-smi (470.256.02-2) ...
Setting up libgles-nvidia2:amd64 (470.256.02-2) ...
Setting up nvidia-driver-bin (470.256.02-2) ...
Setting up libnvcuvid1:amd64 (470.256.02-2) ...
Setting up nvidia-persistenced (470.103.01-2~deb11u1) ...
adduser: Warning: The home dir /var/run/nvpd/ you specified can't be accessed: No such file or directory
Adding system user `nvpd' (UID 103) ...
Adding new group `nvpd' (GID 110) ...
Adding new user `nvpd' (UID 103) with group `nvpd' ...
Not creating home directory `/var/run/nvpd/'.
Created symlink /etc/systemd/system/multi-user.target.wants/nvidia-persistenced.service → /lib/systemd/system/nvidia-persistenced.service.
Could not execute systemctl:  at /usr/bin/deb-systemd-invoke line 145.
Setting up nvidia-egl-icd:amd64 (470.256.02-2) ...
Setting up libnvidia-encode1:amd64 (470.256.02-2) ...
Setting up nvidia-driver-libs:amd64 (470.256.02-2) ...
Processing triggers for nvidia-alternative (470.256.02-2) ...
update-alternatives: updating alternative /usr/lib/nvidia/current because link group nvidia has changed slave links
Setting up nvidia-kernel-dkms (470.256.02-2) ...
Loading new nvidia-current-470.256.02 DKMS files...
Building for 6.1.0-31-amd64
Building initial module for 6.1.0-31-amd64
Done.

nvidia-current.ko:
Running module version sanity check.
 - Original module
   - No original module exists within this kernel
 - Installation
   - Installing to /lib/modules/6.1.0-31-amd64/updates/dkms/

nvidia-current-modeset.ko:
Running module version sanity check.
 - Original module
   - No original module exists within this kernel
 - Installation
   - Installing to /lib/modules/6.1.0-31-amd64/updates/dkms/

nvidia-current-drm.ko:
Running module version sanity check.
 - Original module
   - No original module exists within this kernel
 - Installation
   - Installing to /lib/modules/6.1.0-31-amd64/updates/dkms/

nvidia-current-uvm.ko:
Running module version sanity check.
 - Original module
   - No original module exists within this kernel
 - Installation
   - Installing to /lib/modules/6.1.0-31-amd64/updates/dkms/

nvidia-current-peermem.ko:
Running module version sanity check.
 - Original module
   - No original module exists within this kernel
 - Installation
   - Installing to /lib/modules/6.1.0-31-amd64/updates/dkms/
depmod...
Setting up nvidia-driver (470.256.02-2) ...
Processing triggers for libc-bin (2.36-9+deb12u9) ...
Processing triggers for initramfs-tools (0.142+deb12u1) ...
update-initramfs: Generating /boot/initrd.img-6.1.0-31-amd64
Processing triggers for update-glx (1.2.1~deb11u1) ...
Processing triggers for glx-alternative-nvidia (1.2.1~deb11u1) ...
update-alternatives: using /usr/lib/nvidia to provide /usr/lib/glx (glx) in auto mode
Processing triggers for glx-alternative-mesa (1.2.1~deb11u1) ...
Processing triggers for libc-bin (2.36-9+deb12u9) ...
Processing triggers for initramfs-tools (0.142+deb12u1) ...
update-initramfs: Generating /boot/initrd.img-6.1.0-31-amd64
```

顺利安装驱动，之后重启机器。

## 参考资料

- [适用于 Debian 12 的 NVIDIA 驱动程序](https://www.reddit.com/r/linux4noobs/comments/18n34c3/nvidia_drivers_for_debian_12_step_by_step/)
- [How to install Nvidia driver on Debian 12 Bookworm Linux](https://linuxconfig.org/how-to-install-nvidia-driver-on-debian-12-bookworm-linux)
